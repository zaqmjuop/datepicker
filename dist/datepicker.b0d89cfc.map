{"version":3,"sources":["index.js"],"names":["defaultMonths","getMonths","yearNumber","Number","isSafeInteger","TypeError","months","isLeapYear","getDaysCount","year","month","count","getWeekArray","date","Date","daysCount","getFullYear","getMonth","prevMonthObj","prevMonthDaysCount","start","getDate","getDay","week","i","dateNum","push","getMonthArray","array","thisWeek","pastDayNumber","pastDate","pastWeek","unshift","futureDayNumber","futureDate","futureWeek","initDatepicker","today","datepicker","document","querySelector","picker","innerText","fillDayPickerByDate","daypicker","monthArray","trs","querySelectorAll","forEach","weekArray","weekIndex","trItem","tds","day","dayIndex","tdItem","addEventListener","currentDate","pickerDate","currentPicker","input","prevMonth","nextMonth","daypickerItems","currentPickerDate","item","value","log"],"mappings":"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","file":"datepicker.b0d89cfc.map","sourceRoot":"..","sourcesContent":["\nconst defaultMonths = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\nconst getMonths = (yearNumber) => {\n  // 用一个数组表示某一年的12月每月有多少天\n  if (!Number.isSafeInteger(yearNumber)) throw new TypeError('param should be a year number, and type is integer');\n  const months = defaultMonths;\n  const isLeapYear = (yearNumber % 4 === 0);\n  if (isLeapYear) months[1] = 29;\n  return months;\n};\n\nconst getDaysCount = (year, month) => {\n  // 获得某一个月的天数\n  if (!Number.isSafeInteger(year)) throw new TypeError('param year should be a Integer of year');\n  if (!Number.isSafeInteger(month)) throw new TypeError('param month should be a Integer of month');\n  const months = getMonths(year);\n  const count = months[month];\n  return count;\n};\n\nconst getWeekArray = (date) => {\n  // 用数组形式表示一周，从周一开始 [30, 1, 2, 3, 4, 5, 6]\n  if (!(date instanceof Date)) throw new TypeError('param date should be a instance of Date');\n  const daysCount = getDaysCount(date.getFullYear(), date.getMonth());\n  const prevMonthObj = { year: date.getFullYear(), month: (date.getMonth() - 1) };\n  if (prevMonthObj.month < 0) {\n    prevMonthObj.year -= 1;\n    prevMonthObj.month = 11;\n  }\n  const prevMonthDaysCount = getDaysCount(prevMonthObj.year, prevMonthObj.month);\n  const start = (date.getDate() - date.getDay()) + 1;\n  const week = [];\n  for (let i = 0; i < 7; i += 1) {\n    let dateNum = start + i;\n\n    if (dateNum > daysCount) {\n      dateNum -= daysCount;\n    } else if (dateNum < 1) {\n      dateNum += prevMonthDaysCount;\n    }\n    week.push(dateNum);\n  }\n  return week;\n};\n\nconst getMonthArray = (date) => {\n  // 用数组形式表示一个月 [[30, 1, 2, 3, 4, 5, 6],[7,8,9,10,11,12,13], ...]\n  if (!(date instanceof Date)) throw new TypeError('param date should be a instance of Date');\n  const year = date.getFullYear();\n  const month = date.getMonth();\n  const daysCount = getDaysCount(year, month);\n  const array = [];\n  const thisWeek = getWeekArray(date);\n  array.push(thisWeek);\n  for (let i = 1; i < 6; i += 1) {\n    const pastDayNumber = date.getDate() - (i * 7);\n    if ((pastDayNumber > 0) && (pastDayNumber <= daysCount)) {\n      const pastDate = new Date(year, month, pastDayNumber);\n      const pastWeek = getWeekArray(pastDate);\n      array.unshift(pastWeek);\n    }\n    const futureDayNumber = date.getDate() + (i * 7);\n    if ((futureDayNumber > 0) && (futureDayNumber <= daysCount)) {\n      const futureDate = new Date(year, month, futureDayNumber);\n      const futureWeek = getWeekArray(futureDate);\n      array.push(futureWeek);\n    }\n  }\n  return array;\n};\n\nconst initDatepicker = () => {\n  const today = new Date();\n  const datepicker = document.querySelector('#datepicker');\n  const picker = document.querySelector('#picker');\n  const year = document.querySelector('#year');\n  const month = document.querySelector('#month');\n  year.innerText = today.getFullYear();\n  month.innerText = today.getMonth() + 1;\n};\n\nconst fillDayPickerByDate = (date) => {\n  // 根据日期填充选择器的日期\n  if (!(date instanceof Date)) throw new TypeError('param date should be a instance of Date');\n  const daypicker = document.querySelector('#daypicker');\n  const monthArray = getMonthArray(date);\n  const trs = daypicker.querySelectorAll('tr');\n  document.querySelector('#year').innerText = date.getFullYear();\n  document.querySelector('#month').innerText = (date.getMonth() + 1);\n  monthArray.forEach((weekArray, weekIndex) => {\n    const trItem = trs[weekIndex];\n    const tds = trItem.querySelectorAll('td');\n    weekArray.forEach((day, dayIndex) => {\n      const tdItem = tds[dayIndex];\n      tdItem.innerText = day;\n    });\n  });\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initDatepicker();\n  const today = new Date();\n  let currentDate = today;\n  let pickerDate = today;\n  const currentPicker = {\n    year: today.getFullYear(), month: today.getMonth(), day: today.getDate(),\n  };\n  const input = document.querySelector('#input');\n  const datepicker = document.querySelector('#datepicker');\n  const picker = document.querySelector('#picker');\n  const prevMonth = document.querySelector('#prev-month');\n  const nextMonth = document.querySelector('#next-month');\n  const year = document.querySelector('#year').innerText;\n  const month = document.querySelector('#month').innerText;\n  const daypicker = document.querySelector('#daypicker');\n  const daypickerItems = daypicker.querySelectorAll('td');\n  prevMonth.addEventListener('click', () => {\n    currentPicker.day = 1;\n    currentPicker.month -= 1;\n    if (currentPicker.month < 0) {\n      currentPicker.year -= 1;\n      currentPicker.month = 11;\n    }\n    const currentPickerDate = new Date(currentPicker.year, currentPicker.month, currentPicker.day);\n    fillDayPickerByDate(currentPickerDate);\n  });\n  nextMonth.addEventListener('click', () => {\n    currentPicker.day = 1;\n    currentPicker.month += 1;\n    if (currentPicker.month > 11) {\n      currentPicker.year += 1;\n      currentPicker.month = 0;\n    }\n    const currentPickerDate = new Date(currentPicker.year, currentPicker.month, currentPicker.day);\n    fillDayPickerByDate(currentPickerDate);\n  });\n  daypickerItems.forEach((item) => {\n    item.addEventListener('click', () => {\n      const day = item.innerText;\n      const value = `${year}-${month}-${day}`;\n      input.value = value;\n    });\n  });\n  const log = getWeekArray(new Date(2016, 0, 1));\n  // console.log(log);\n  fillDayPickerByDate(today);\n});\n"]}